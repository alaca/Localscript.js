/* localscript.js [c]2017 Ante Laca */
!function(e){"use strict";var t=e.document,r=e.localStorage,n=t.currentScript||t.querySelector("script[data-expire]");t.addEventListener("DOMContentLoaded",function(){var e=[],s=t.getElementsByTagName("script");if(r){var l=Math.floor((new Date).getTime()/1e3),o=r.getItem("ls-expire"),i=n.getAttribute("data-expire")||3600;(null===o||l>o)&&(r.clear(),r.setItem("ls-expire",parseInt(l)+parseInt(i)))}for(var u in s)"text/localscript"==s[u].type&&e.push({url:s[u].getAttribute("data-src")||null,code:s[u].innerHTML||null});a(e).then(function(e){for(var t in e)try{new Function(e[t])()}catch(e){console.log(e.name,e.message)}})},!1);var a=function(e){var t=[];return e.forEach(function(e){var n=new Promise(function(t,n){if(e.url){var a=r?r.getItem(e.url):null;if(null===a){var s=new XMLHttpRequest;s.open("get",e.url),s.onload=function(){if(200==s.status){if(r)try{r.setItem(e.url,s.response)}catch(e){r.clear()}t(s.response)}else n(Error(s.statusText))},s.send()}else t(a)}else t(e.code)});t.push(n)}),Promise.all(t)}}(this);