/* localscript.js [c]2017 Ante Laca */
!function(e){"use strict";var t=e.document,r=e.localStorage,n=t.currentScript||t.querySelector("script[data-expire]"),a=function(e){var t=[];return e.forEach(function(e){var n=new Promise(function(t,n){if(e.url){var a=r?r.getItem(e.url):null;if(null===a){var l=new XMLHttpRequest;l.open("get",e.url),l.onload=function(){if(200==l.status){if(r)try{r.setItem(e.url,l.response)}catch(e){r.clear()}t(l.response)}else n(Error(l.statusText))},l.send()}else t(a)}else t(e.code)});t.push(n)}),Promise.all(t)};t.addEventListener("DOMContentLoaded",function(){var e=[],l=t.getElementsByTagName("script");if(r){var s=Math.floor((new Date).getTime()/1e3),o=r.getItem("ls-expire"),i=n.getAttribute("data-expire")||3600;(null===o||s>o)&&(r.clear(),r.setItem("ls-expire",parseInt(s)+parseInt(i)))}for(var u in l)"text/localscript"==l[u].type&&e.push({url:l[u].getAttribute("data-src")||null,code:l[u].innerHTML||null});a(e).then(function(e){for(var t in e)try{(0,eval)(e[t])}catch(e){console.log(e.name,e.message)}})},!1)}(this);