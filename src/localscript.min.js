/* localscript.js [c]2017 Ante Laca */
!function(e){"use strict";var t=e.document,r=e.localStorage,n=t.currentScript||t.querySelector("script[data-expire]"),a=function(e){var t=[];return e.forEach(function(e){var n=new Promise(function(t,n){if(e.url){var a=r?r.getItem(e.url):null;if(null===a){var s=new XMLHttpRequest;s.open("get",e.url),s.onload=function(){if(200==s.status){if(r)try{r.setItem(e.url,s.response)}catch(e){r.clear()}t(s.response)}else n(new Error(s.responseURL+" "+s.statusText))},s.send()}else t(a)}else t(e.code)});t.push(n)}),Promise.all(t)};t.addEventListener("DOMContentLoaded",function(){var e=[],s=t.getElementsByTagName("script");if(r){var l=Math.floor((new Date).getTime()/1e3),o=r.getItem("ls-expire"),c=n.getAttribute("data-expire")||3600;(null===o||l>o)&&(r.clear(),r.setItem("ls-expire",parseInt(l)+parseInt(c)))}for(var i in s)"text/localscript"==s[i].type&&e.push({url:s[i].getAttribute("data-src")||null,code:s[i].innerHTML||null});a(e).then(function(e){for(var t in e)try{(0,eval)(e[t])}catch(e){console.log(e.name,e.message)}}).catch(function(e){console.log(e)})},!1)}(this);